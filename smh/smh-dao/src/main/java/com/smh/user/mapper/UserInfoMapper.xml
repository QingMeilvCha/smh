<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smh.user.mapper.UserInfoMapper">

    <sql id="insertFields"><!-- Fields to insert -->
        <trim  suffixOverrides="," >
            <if test="userId != null">user_id,</if>
            <if test="userName != null">user_name,</if>
            <if test="password != null">password,</if>
            <if test="account != null">account,</if>
        </trim>
    </sql>

    <sql id="insertValues"><!-- Values to insert -->
        <trim  suffixOverrides="," >
            <if test="userId != null">#{userId},</if>
            <if test="userName != null">#{userName},</if>
            <if test="password != null">#{password},</if>
            <if test="account != null">#{account},</if>
        </trim>
    </sql>

    <!-- SQL查询条件明确，禁止conditions(便于索引) -->
    <sql id="conditions"><!-- Search Condition -->
        <trim prefix="where" prefixOverrides="and |or">
            <if test="userId != null"> and user_id = #{userId}</if>
            <if test="userName != null"> and user_name = #{userName}</if>
            <if test="password != null"> and password = #{password}</if>
            <if test="account != null"> and account = #{account}</if>
        </trim>
    </sql>

    <select id="selectEntity" parameterType="Map" resultType="com.smh.user.model.UserInfo">
      SELECT * from user_info
        <include refid="conditions"/>
    </select>

    <insert id="insert" parameterType="Object">
        INSERT into user_info
        (<include refid="insertFields"/>)
        values(<include refid="insertValues"/>)

    </insert>
</mapper>